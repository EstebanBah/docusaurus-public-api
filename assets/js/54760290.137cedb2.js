"use strict";(self.webpackChunkdocusaurus_public_api=self.webpackChunkdocusaurus_public_api||[]).push([[6815],{3905:(t,e,n)=>{n.d(e,{Zo:()=>u,kt:()=>c});var a=n(7294);function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e){if(null==t)return{};var n,a,l=function(t,e){if(null==t)return{};var n,a,l={},r=Object.keys(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||(l[n]=t[n]);return l}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}var d=a.createContext({}),m=function(t){var e=a.useContext(d),n=e;return t&&(n="function"==typeof t?t(e):o(o({},e),t)),n},u=function(t){var e=m(t.components);return a.createElement(d.Provider,{value:e},t.children)},s={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},p=a.forwardRef((function(t,e){var n=t.components,l=t.mdxType,r=t.originalType,d=t.parentName,u=i(t,["components","mdxType","originalType","parentName"]),p=m(n),c=l,k=p["".concat(d,".").concat(c)]||p[c]||s[c]||r;return n?a.createElement(k,o(o({ref:e},u),{},{components:n})):a.createElement(k,o({ref:e},u))}));function c(t,e){var n=arguments,l=e&&e.mdxType;if("string"==typeof t||l){var r=n.length,o=new Array(r);o[0]=p;var i={};for(var d in e)hasOwnProperty.call(e,d)&&(i[d]=e[d]);i.originalType=t,i.mdxType="string"==typeof t?t:l,o[1]=i;for(var m=2;m<r;m++)o[m]=n[m];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},2965:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>d,contentTitle:()=>o,default:()=>s,frontMatter:()=>r,metadata:()=>i,toc:()=>m});var a=n(7462),l=(n(7294),n(3905));const r={sidebar_position:10,title:"Factura Global",description:"Crear y listar facturas globales",slug:"/factura-global"},o="Factura Global",i={unversionedId:"Documentos/Global",id:"version-MX/Documentos/Global",title:"Factura Global",description:"Crear y listar facturas globales",source:"@site/versioned_docs/version-MX/Documentos/Global.md",sourceDirName:"Documentos",slug:"/factura-global",permalink:"/docusaurus-public-api/MX/factura-global",draft:!1,tags:[],version:"MX",sidebarPosition:10,frontMatter:{sidebar_position:10,title:"Factura Global",description:"Crear y listar facturas globales",slug:"/factura-global"},sidebar:"tutorialSidebar",previous:{title:"Documentos",permalink:"/docusaurus-public-api/MX/documentos"},next:{title:"Env\xedos",permalink:"/docusaurus-public-api/MX/documentos/env\xedos"}},d={},m=[{value:"Estructura JSON",id:"estructura-json",level:2},{value:"Atributos",id:"atributos",level:3},{value:"GET tickets disponibles",id:"get-tickets-disponibles",level:2},{value:"Par\xe1metros",id:"par\xe1metros",level:4},{value:"Ejemplos",id:"ejemplos",level:4},{value:"Respuesta",id:"respuesta",level:4},{value:"Atributos",id:"atributos-1",level:4},{value:"GET valida un ticket",id:"get-valida-un-ticket",level:2},{value:"Par\xe1metros",id:"par\xe1metros-1",level:4},{value:"Ejemplos",id:"ejemplos-1",level:4},{value:"Respuesta",id:"respuesta-1",level:4},{value:"GET factura global",id:"get-factura-global",level:2},{value:"Par\xe1metros",id:"par\xe1metros-2",level:4},{value:"Ejemplos",id:"ejemplos-2",level:4},{value:"Respuesta",id:"respuesta-2",level:4},{value:"GET factura global",id:"get-factura-global-1",level:2},{value:"Respuesta",id:"respuesta-3",level:4},{value:"POST Factura Global",id:"post-factura-global",level:2},{value:"Crear factura global",id:"crear-factura-global",level:3},{value:"Cliente del documento",id:"cliente-del-documento",level:3},{value:"Cliente",id:"cliente",level:4},{value:"Detalles",id:"detalles",level:3},{value:"Forma de pago",id:"forma-de-pago",level:3},{value:"Ejemplo JSON",id:"ejemplo-json",level:3},{value:"Env\xedo",id:"env\xedo",level:4},{value:"Respuesta",id:"respuesta-4",level:4},{value:"Asociar tickets a factura global",id:"asociar-tickets-a-factura-global",level:3},{value:"Respuesta",id:"respuesta-5",level:4}],u={toc:m};function s(t){let{components:e,...n}=t;return(0,l.kt)("wrapper",(0,a.Z)({},u,n,{components:e,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"factura-global"},"Factura Global"),(0,l.kt)("p",null,"Listar tickets de venta generados en Bsale para confeccionar una factura global. "),(0,l.kt)("admonition",{type:"info"},(0,l.kt)("p",{parentName:"admonition"},(0,l.kt)("strong",{parentName:"p"},"Crear documentos globales")," ")),(0,l.kt)("h2",{id:"estructura-json"},"Estructura JSON"),(0,l.kt)("p",null,"Al realizar una petici\xf3n ",(0,l.kt)("inlineCode",{parentName:"p"},"HTTP"),", el servicio retornara un JSON con la siguiente estructura:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Response /ticket_invoice/global.json"',title:'"Response','/ticket_invoice/global.json"':!0},'{\n    "href": "https://api.bsale.io/v2/ticket_invoice/global.json",\n    "count": 1,\n    "limit": 25,\n    "offset": 0,\n    "items": [\n        {\n            "documentId": 569,\n            "numDoc": 26,\n            "documentStatus": 0,\n            "commercialStatus": 0,\n            "docGenerationDate": 1684772084,\n            "netAmount": 2353.75,\n            "exemptAmount": 0,\n            "taxAmount": 188.3,\n            "totalAmount": 2542.05,\n            "urlPdf": "http://s3.amazonaws.com/bsale/12345/timbres/AAc9fcSS46.png",\n            "urlXml": "https://bsale.s3.amazonaws.com/12345/cfdi/646b94f5e0c21fd7f0abc151.xml",\n            "documentToken": "AAc9fcSS46",\n            "documentType": 37,\n            "idClient": 18,\n            "idOffice": 3,\n            "urlPublicDocument": "https://app.bsale.com.mx/view/12345/AAc9fcSS46",\n            "vdtExtra": {\n                "id": "646b94c21fd7f0abc151",\n                "uuid": "7dfce91a-47ed-4981-8ec1-e94bf4334",\n                "cfdStamp": "U8Js+k0WtkIxIknwv55OZkN48QaH4d5NgJE6iAjGgDuOBCVxdF2tnlfNR7RutPQc4QEuKrFnY/NnpO/Eu5ABZumGdlpTPhwrBSxz3ir0hlQ1Urj4uRMWVlCs4oHGxb/oPeh7khdGlkOFHJui3ncLHYRLW7Bd2tnH3jqy2GE0qEK96KNhxPdaREkKHUyvFLAK7FxxkPsvilbipgcH2rL6FIQMoHWA+Sd8dlDgbe4OWZFVXTZbY7Oc8M5cOnojthVZIKYbpVPM396kEQcJoua71l7Lu9aa+KcS4G59T3Y5l5nEC1EG63a8SXunOQg6kiM5su09w==",\n                "qrBase64": "iVBORw0KGgoAAAANSAAn0ifiaAAAABlBMVEX///8AAABVwtN+AAACn0lEQVR42rTTwUrzWBQH8HNpSfygmA/ctCjemU27jRTaBKR1dDvgK2Ro0Y1gsZsOdx5WFrKwbahFd/PISQ6thoHVqdodSgBAJ4oN0a7SrXPvb8K6XZO0OajDhhjxWEEhkVHoVifKP14QAEGaSJzeZfdvZrQCrGKweqfP8aDhYZ4WufReUlVKdS78SgIL5/qYPuy1ei4ZUXoixplg67AsfwArHpw11SpXcbL/Dmzm3+akQAtVzh0l60i/3YKbCyN90N4NQa9YOtlwTCIoPjWQejLh/kgP1YvV/W0d1HSNSmTnxrgHP/dfOrGsiNKVy68LRnh2TL7nHCFL3eWYsArOGh/px31o37U1bobbFa0vjBSw65wAshKm74al9JV+UkJrpREeoVe1rceXoEV8DI9NGb43zSXhOizGBAASUVORK5CYII=",\n                "satStamp": "hMm/Q8r+ghcWGjwQYMQhT7iTwsJ49DCw/mSzzBmLJP4pZmJ66HtB2n7/gL1mYbnNR2uZYKCN8O8EqxFA27PqplSdxeDRWGsbz6HPZ0LPRA98t3SVke85gNFEFssO+42O+uueMPpZOIyUq5B8T/aR9web2xQKSAuFVU5sUkN2wTbOUohnSEZMycJKWDqVLoES5GO5grz1vj29rxnDVpmHgBnQu3fStk73a/gLeBMYAw09D0/4WRTdLtJyFMuM1JE+HVDuuhgj2OZKLfAiAx4qye8zBfv5LwCuf4mgIyP5yss6apVvNeWGkEJUAkHGg==",\n                "stampDate": "2023-05-22T10:14:45",\n                "csdCerNumber": "00001000000509963201",\n                "satCerNumber": "00001000000509846663",\n                "serialNumber": "FG00",\n                "originalChain": "||4.0|FG00|26|2023-05-22T07:14:00|04|00001000000509963201|2353.75|MXN|2542.05|I|01|PUE|22427|02|05|2023|SCT166615AM3|SANTA CLAUS CORP|601|XAXX010101000|Publico General|22427|616|S01|01010101|1684772084|1|ACT|Factura global|2353.75|2353.75|02|2353.75|002|Tasa|0.080000|188.300000|2353.75|002|Tasa|0.080000|188.30|188.30||",\n                "fullSerialNumber": "FG00-26"\n            },\n            "period": 2,\n            "periodicityMonth": "5",\n            "periodicityYear": "2023",\n            "informed": 0,\n            "expirationDate": 1684713600,\n            "emissionDate": 1684713600,\n            "cpnId": 12345\n        }\n    ],\n    "totalAmountDocuments": 2542.05\n}\n')),(0,l.kt)("h3",{id:"atributos"},"Atributos"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Atributo"),(0,l.kt)("th",{parentName:"tr",align:null},"Descripci\xf3n"),(0,l.kt)("th",{parentName:"tr",align:null},"Tipo dato"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"href")),(0,l.kt)("td",{parentName:"tr",align:null},"url del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"String")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"documentId")),(0,l.kt)("td",{parentName:"tr",align:null},"Id del documento generado por Bsale"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"numDoc")),(0,l.kt)("td",{parentName:"tr",align:null},"N\xfamero del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"documentStatus")),(0,l.kt)("td",{parentName:"tr",align:null},"estado del documento indica si el documento esta activo(0) o inactivo (1)"),(0,l.kt)("td",{parentName:"tr",align:null},"Boolean")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"commercialStatus")),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"docGenerationDate")),(0,l.kt)("td",{parentName:"tr",align:null},"fecha y hora en que se genero el documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"totalAmount")),(0,l.kt)("td",{parentName:"tr",align:null},"monto total del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Float")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"netAmount")),(0,l.kt)("td",{parentName:"tr",align:null},"monto neto del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Float")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"taxAmount")),(0,l.kt)("td",{parentName:"tr",align:null},"monto de impuestos del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Float")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"exemptAmount")),(0,l.kt)("td",{parentName:"tr",align:null},"monto exento del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Float")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"urlPdf")),(0,l.kt)("td",{parentName:"tr",align:null},"url del pdf del documento, con todas sus copias"),(0,l.kt)("td",{parentName:"tr",align:null},"Text")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"urlXml")),(0,l.kt)("td",{parentName:"tr",align:null},"respaldo del documento electr\xf3nico"),(0,l.kt)("td",{parentName:"tr",align:null},"String")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"documentToken")),(0,l.kt)("td",{parentName:"tr",align:null},"token \xfanico del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"String")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"documentType")),(0,l.kt)("td",{parentName:"tr",align:null},"nodo que indica el tipo del documento al cual pertenece el documento."),(0,l.kt)("td",{parentName:"tr",align:null},"Text")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"idClient")),(0,l.kt)("td",{parentName:"tr",align:null},"Id del cliente utilizado en el documento."),(0,l.kt)("td",{parentName:"tr",align:null},"Integer")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"client")),(0,l.kt)("td",{parentName:"tr",align:null},"nodo que indica el cliente al cual se le emiti\xf3 el documento."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"*"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"idOffice")),(0,l.kt)("td",{parentName:"tr",align:null},"Id de la sucursal a la cual se asoci\xf3 el documento."),(0,l.kt)("td",{parentName:"tr",align:null},"Integer")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"office")),(0,l.kt)("td",{parentName:"tr",align:null},"nodo que indica la sucursal a la cual pertenece el documento."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"*"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"urlPublicDocument")),(0,l.kt)("td",{parentName:"tr",align:null},"url publica para visualizar el documento, con todas sus copias"),(0,l.kt)("td",{parentName:"tr",align:null},"Text")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"id")),(0,l.kt)("td",{parentName:"tr",align:null},"id documento electr\xf3nico"),(0,l.kt)("td",{parentName:"tr",align:null},"Text")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"uuid")),(0,l.kt)("td",{parentName:"tr",align:null},"uuid sat"),(0,l.kt)("td",{parentName:"tr",align:null},"Text")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"cfdStamp")),(0,l.kt)("td",{parentName:"tr",align:null},"Timbre SAT del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Text")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"qrBase64")),(0,l.kt)("td",{parentName:"tr",align:null},"Timbre SAT del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Text")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"satStamp")),(0,l.kt)("td",{parentName:"tr",align:null},"Timbre SAT del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Text")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"stampDate")),(0,l.kt)("td",{parentName:"tr",align:null},"Fecha timbre SAT del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Float")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"csdCerNumber")),(0,l.kt)("td",{parentName:"tr",align:null},"Timbre SAT del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Text")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"satCerNumber")),(0,l.kt)("td",{parentName:"tr",align:null},"Timbre SAT del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Text")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"serialNumber")),(0,l.kt)("td",{parentName:"tr",align:null},"N\xfamero de serie del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Text")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"originalChain")),(0,l.kt)("td",{parentName:"tr",align:null},"Cadena original del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Text")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"fullSerialNumber")),(0,l.kt)("td",{parentName:"tr",align:null},"N\xfamero de serie completo del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Text")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"period")),(0,l.kt)("td",{parentName:"tr",align:null},"Periodicidad del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"periodicityMonth")),(0,l.kt)("td",{parentName:"tr",align:null},"Mes del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"periodicityYear")),(0,l.kt)("td",{parentName:"tr",align:null},"A\xf1o del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"informed")),(0,l.kt)("td",{parentName:"tr",align:null},"Estado electr\xf3nico del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"emissionDate")),(0,l.kt)("td",{parentName:"tr",align:null},"fecha de emisi\xf3n del documento (Integer) (no se debe aplicar zona horaria, solo considerar la fecha)."),(0,l.kt)("td",{parentName:"tr",align:null},"Integer")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"expirationDate")),(0,l.kt)("td",{parentName:"tr",align:null},"fecha de vencimiento del documento (Integer) (no se debe aplicar zona horaria, solo considerar la fecha)"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"cpnId")),(0,l.kt)("td",{parentName:"tr",align:null},"Id \xfanico de la empresa (generado por Bsale)"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"totalAmountDocuments")),(0,l.kt)("td",{parentName:"tr",align:null},"Suma de los montos de los tickets encontrados ignorando la paginaci\xf3n (siempre se obtiene el total de los tickets encontrados seg\xfan las fechas y filtros enviados)"),(0,l.kt)("td",{parentName:"tr",align:null},"Boolean")))),(0,l.kt)("h2",{id:"get-tickets-disponibles"},"GET tickets disponibles"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"GET ",(0,l.kt)("inlineCode",{parentName:"li"},"/v2/documents/ticket_invoice.json")," Retorna tickets de venta disponibles para utilizarlos en una factura global.")),(0,l.kt)("admonition",{type:"info"},(0,l.kt)("p",{parentName:"admonition"},"Obtiene por defecto los tickets generados en los ultimos 7 dias.")),(0,l.kt)("h4",{id:"par\xe1metros"},"Par\xe1metros"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"limit"),", limita la cantidad de items de una respuesta JSON, por defecto el limit es 25, el m\xe1ximo permitido es 50."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"offset"),", permite paginar los items de una respuesta JSON, por defecto el offset es 0."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"init_date"),", fecha inicial del rango (Date) (Formato Unix Timestamp Ej: 1683137041)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"end_date"),", fecha final del rango (Date) (Formato Unix Timestamp Ej: 1683137041)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"serial_number"),",  n\xfamero de serie del ticket"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"num_ticket"),", filtra por n\xfamero de ticket"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"office_id"),", filtra por id de sucursal"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"tickets"),", filtra Arreglo de ids venta documento tributarios de tickets determinados, si se usa este filtro, se ignora los demas filtros"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"payment_type_id"),", filtra por id de forma de pago"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"document_token"),", filtra por token de documento"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"trib_code"),", el codigo tributario del tipo de documento del documentos asignado al ticket, por defecto este valor es 'T', pero si se llegase a tener otro tipo de documento destinado a tickets, se debe enviar el codigo tributario de ese documento.")),(0,l.kt)("h4",{id:"ejemplos"},"Ejemplos"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"GET /v2/documents/ticket_invoice.json?limit=3")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"GET /v2/documents/ticket_invoice.json?serial_number=0000"))),(0,l.kt)("h4",{id:"respuesta"},"Respuesta"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Response /ticket_invoice.json"',title:'"Response','/ticket_invoice.json"':!0},'{\n    "href": "https://api.bsale.io/v1/ticket_invoice.json",\n    "count": 27,\n    "limit": 3,\n    "offset": 0,\n    "items": [\n        {\n            "documentId": 573,\n            "numDoc": 224,\n            "documentStatus": 0,\n            "commercialStatus": 0,\n            "docGenerationDate": 1684787498,\n            "netAmount": 969.44,\n            "exemptAmount": 0,\n            "taxAmount": 77.56,\n            "totalAmount": 1047,\n            "documentToken": "9db3baf39b14",\n            "documentType": 39,\n            "idClient": 101,\n            "idOffice": 3,\n            "urlPublicDocument": "https://app.bsale.com.mx/view/12345/9db3baf39b14",\n            "vdtExtra": {\n                "id": "",\n                "uuid": "",\n                "cfdStamp": "",\n                "qrBase64": "",\n                "satStamp": "",\n                "stampDate": "",\n                "csdCerNumber": "",\n                "satCerNumber": "",\n                "serialNumber": "0000",\n                "originalChain": "",\n                "fullSerialNumber": "0000-224"\n            },\n            "informed": 0,\n            "expirationDate": 1684713600,\n            "emissionDate": 1684713600,\n            "cpnId": 12345\n        },\n        {\n            "documentId": 574,\n            "numDoc": 225,\n            "documentStatus": 0,\n            "commercialStatus": 0,\n            "docGenerationDate": 1684795930,\n            "netAmount": 237.04,\n            "exemptAmount": 0,\n            "taxAmount": 18.96,\n            "totalAmount": 256,\n            "documentToken": "a445870db67a",\n            "documentType": 39,\n            "idClient": 102,\n            "idOffice": 3,\n            "urlPublicDocument": "https://app.bsale.com.mx/view/12345/a445870db67a",\n            "vdtExtra": {\n                "id": "",\n                "uuid": "",\n                "cfdStamp": "",\n                "qrBase64": "",\n                "satStamp": "",\n                "stampDate": "",\n                "csdCerNumber": "",\n                "satCerNumber": "",\n                "serialNumber": "0000",\n                "originalChain": "",\n                "fullSerialNumber": "0000-225"\n            },\n            "informed": 0,\n            "expirationDate": 1684713600,\n            "emissionDate": 1684713600,\n            "cpnId": 12345\n        },\n        {\n            "documentId": 575,\n            "numDoc": 226,\n            "documentStatus": 0,\n            "commercialStatus": 0,\n            "docGenerationDate": 1684803687,\n            "netAmount": 883.62,\n            "exemptAmount": 0,\n            "taxAmount": 141.38,\n            "totalAmount": 1025,\n            "documentToken": "36e2736e7fb2",\n            "documentType": 39,\n            "idClient": 0,\n            "idOffice": 3,\n            "urlPublicDocument": "https://app.bsale.com.mx/view/12345/36e2736e7fb2",\n            "vdtExtra": {\n                "id": "",\n                "uuid": "",\n                "cfdStamp": "",\n                "qrBase64": "",\n                "satStamp": "",\n                "stampDate": "",\n                "csdCerNumber": "",\n                "satCerNumber": "",\n                "serialNumber": "0000",\n                "originalChain": "",\n                "fullSerialNumber": "0000-226"\n            },\n            "informed": 0,\n            "expirationDate": 1684713600,\n            "emissionDate": 1684713600,\n            "cpnId": 12345\n        }\n    ],\n    "next": "https://api.bsale.io/v1/ticket_invoice?limit=3&offset=3",\n    "totalAmountDocuments": 33916.55\n}\n')),(0,l.kt)("h4",{id:"atributos-1"},"Atributos"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Atributo"),(0,l.kt)("th",{parentName:"tr",align:null},"Descripci\xf3n"),(0,l.kt)("th",{parentName:"tr",align:null},"Tipo dato"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"href")),(0,l.kt)("td",{parentName:"tr",align:null},"url del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"String")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"documentId")),(0,l.kt)("td",{parentName:"tr",align:null},"Id del documento generado por Bsale"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"numDoc")),(0,l.kt)("td",{parentName:"tr",align:null},"N\xfamero del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"documentStatus")),(0,l.kt)("td",{parentName:"tr",align:null},"estado del documento indica si el documento esta activo(0) o inactivo (1)"),(0,l.kt)("td",{parentName:"tr",align:null},"Boolean")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"commercialStatus")),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"docGenerationDate")),(0,l.kt)("td",{parentName:"tr",align:null},"fecha y hora en que se genero el documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"totalAmount")),(0,l.kt)("td",{parentName:"tr",align:null},"monto total del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Float")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"netAmount")),(0,l.kt)("td",{parentName:"tr",align:null},"monto neto del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Float")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"taxAmount")),(0,l.kt)("td",{parentName:"tr",align:null},"monto de impuestos del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Float")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"exemptAmount")),(0,l.kt)("td",{parentName:"tr",align:null},"monto exento del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Float")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"documentToken")),(0,l.kt)("td",{parentName:"tr",align:null},"token \xfanico del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"String")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"documentType")),(0,l.kt)("td",{parentName:"tr",align:null},"nodo que indica el tipo del documento al cual pertenece el documento."),(0,l.kt)("td",{parentName:"tr",align:null},"Text")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"idClient")),(0,l.kt)("td",{parentName:"tr",align:null},"Id del cliente utilizado en el documento."),(0,l.kt)("td",{parentName:"tr",align:null},"Integer")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"idOffice")),(0,l.kt)("td",{parentName:"tr",align:null},"Id de la sucursal a la cual se asoci\xf3 el documento."),(0,l.kt)("td",{parentName:"tr",align:null},"Integer")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"urlPublicDocument")),(0,l.kt)("td",{parentName:"tr",align:null},"url publica para visualizar el documento, con todas sus copias"),(0,l.kt)("td",{parentName:"tr",align:null},"Text")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"id")),(0,l.kt)("td",{parentName:"tr",align:null},"id documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Text")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"uuid")),(0,l.kt)("td",{parentName:"tr",align:null},"uuid sat"),(0,l.kt)("td",{parentName:"tr",align:null},"Text")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"cfdStamp")),(0,l.kt)("td",{parentName:"tr",align:null},"Timbre SAT del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Text")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"qrBase64")),(0,l.kt)("td",{parentName:"tr",align:null},"Timbre SAT del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Text")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"satStamp")),(0,l.kt)("td",{parentName:"tr",align:null},"Timbre SAT del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Text")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"stampDate")),(0,l.kt)("td",{parentName:"tr",align:null},"Fecha timbre SAT del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Float")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"csdCerNumber")),(0,l.kt)("td",{parentName:"tr",align:null},"Timbre SAT del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Text")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"satCerNumber")),(0,l.kt)("td",{parentName:"tr",align:null},"Timbre SAT del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Text")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"serialNumber")),(0,l.kt)("td",{parentName:"tr",align:null},"N\xfamero de serie del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Text")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"originalChain")),(0,l.kt)("td",{parentName:"tr",align:null},"Cadena original del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Text")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"fullSerialNumber")),(0,l.kt)("td",{parentName:"tr",align:null},"N\xfamero de serie completo del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Text")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"informed")),(0,l.kt)("td",{parentName:"tr",align:null},"Estado electr\xf3nico del documento"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"emissionDate")),(0,l.kt)("td",{parentName:"tr",align:null},"fecha de emisi\xf3n del documento (Integer)"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"expirationDate")),(0,l.kt)("td",{parentName:"tr",align:null},"fecha de vencimiento del documento (Integer)"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("strong",{parentName:"td"},"cpnId")),(0,l.kt)("td",{parentName:"tr",align:null},"Id \xfanico de la empresa (generado por Bsale)"),(0,l.kt)("td",{parentName:"tr",align:null},"Integer")))),(0,l.kt)("h2",{id:"get-valida-un-ticket"},"GET valida un ticket"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"GET ",(0,l.kt)("inlineCode",{parentName:"li"},"/v2/documents/ticket_invoice/:numDoc/validate.json")," Permite validar un ticket de venta para verificar si puede ser facturado globalmente o por autofacturador.")),(0,l.kt)("admonition",{type:"info"},(0,l.kt)("p",{parentName:"admonition"},"Se debe enviar como par\xe1metro m\xednimo el n\xfamero de ticket, total del ticket y fecha de ticket.")),(0,l.kt)("h4",{id:"par\xe1metros-1"},"Par\xe1metros"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"numDoc"),", N\xfamero del documento."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"total"),", Total del documento."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"date"),", Fecha del ticket (Formato YYYY-MM-DD)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"is_id_doc"),", indica si el par\xe1metro ",(0,l.kt)("inlineCode",{parentName:"li"},"numDoc")," es el id de venta o el n\xfamero de documento (1: id, 0: n\xfamero)")),(0,l.kt)("h4",{id:"ejemplos-1"},"Ejemplos"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"GET /v2/documents/ticket_invoice/224/validate.json?total=1047&date=2023-05-22"))),(0,l.kt)("h4",{id:"respuesta-1"},"Respuesta"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Response /documents/ticket_invoice/224/validate.json"',title:'"Response','/documents/ticket_invoice/224/validate.json"':!0},'{\n    "code": 200,\n    "data": {\n        "documentId": 573,\n        "numDoc": 224,\n        "documentStatus": 0,\n        "docGenerationDate": 0,\n        "totalAmount": 1047,\n        "documentToken": "9db3baf39ssb14",\n        "documentType": 39,\n        "idClient": 101,\n        "urlPublicDocument": "https://app.bsale.com.mx/view//9db3baf39ssb14",\n        "vdtExtra": {\n            "id": "",\n            "uuid": "",\n            "cfdStamp": "",\n            "qrBase64": "",\n            "satStamp": "",\n            "stampDate": "",\n            "csdCerNumber": "",\n            "satCerNumber": "",\n            "serialNumber": "0000",\n            "originalChain": "",\n            "fullSerialNumber": "0000-224"\n        },\n        "documentTypeName": "TICKET DE VENTA",\n        "expirationDate": 1684713600,\n        "emissionDate": 1684713600\n    }\n}\n')),(0,l.kt)("h2",{id:"get-factura-global"},"GET factura global"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"GET ",(0,l.kt)("inlineCode",{parentName:"li"},"/v2/documents/ticket_invoice/global.json")," Obtiene listado de facturas globales")),(0,l.kt)("admonition",{type:"info"},(0,l.kt)("p",{parentName:"admonition"},"Permite obtener las facturas generadas por el facturador global. Obtiene por defecto las facturas generadas en los ultimos 7 dias.")),(0,l.kt)("h4",{id:"par\xe1metros-2"},"Par\xe1metros"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"init_date"),", Fecha inicial del rango (Date) (Formato Unix Timestamp Ej: 1683137041)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"end_date"),", Fecha final del rango (Date) (Formato Unix Timestamp Ej: 1683137041)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"offset"),", Inicio de \xedndice de registros"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"limit"),", Cantidad de registros a obtener"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"serial_number"),", Filtro por numero de serie de la factura"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"uuid"),", Filtro por numero de folio de la factura en el SAT"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"sat_number"),", Filtro por numero certificado SAT"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"csd_number"),", Filtro por numero certificado CSD"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"payment_type_id"),", Filtra por id de forma de pago"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"document_token"),", Filtra por token de documento"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"office_id"),", Filtra por id de sucursal")),(0,l.kt)("h4",{id:"ejemplos-2"},"Ejemplos"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"GET /v2/documents/ticket_invoice/global.json?limit=1")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"GET /v2/documents/ticket_invoice/global.json?document_token=852ec9fc1a46")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"GET /v2/documents/ticket_invoice/global.json?uuid=7dfce91a-47ed-4981-8ec1-A94bf4334"))),(0,l.kt)("h4",{id:"respuesta-2"},"Respuesta"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Response /ticket_invoice/global.json"',title:'"Response','/ticket_invoice/global.json"':!0},'{\n    "href": "https://api.bsale.io/v2/ticket_invoice/global.json",\n    "count": 1,\n    "limit": 25,\n    "offset": 0,\n    "items": [\n        {\n            "documentId": 569,\n            "numDoc": 26,\n            "documentStatus": 0,\n            "commercialStatus": 0,\n            "docGenerationDate": 1684772084,\n            "netAmount": 2353.75,\n            "exemptAmount": 0,\n            "taxAmount": 188.3,\n            "totalAmount": 2542.05,\n            "urlPdf": "http://s3.amazonaws.com/bsale/12345/timbres/AAc9fcSS46.png",\n            "urlXml": "https://bsale.s3.amazonaws.com/12345/cfdi/646b94f5e0c21fd7f0abc151.xml",\n            "documentToken": "AAc9fcSS46",\n            "documentType": 37,\n            "idClient": 18,\n            "idOffice": 3,\n            "urlPublicDocument": "https://app.bsale.com.mx/view/12345/AAc9fcSS46",\n            "vdtExtra": {\n                "id": "646b94c21fd7f0abc151",\n                "uuid": "7dfce91a-47ed-4981-8ec1-A94bf4334",\n                "cfdStamp": "U8Js+k0WtkIxIknwv55OZkN48QaH4d5NgJE6iAjGgDuOBCVxdF2tnlfNR7RutPQc4QEuKrFnY/NnpO/Eu5ABZumGdlpTPhwrBSxz3ir0hlQ1Urj4uRMWVlCs4oHGxb/oPeh7khdGlkOFHJui3ncLHYRLW7Bd2tnH3jqy2GE0qEK96KNhxPdaREkKHUyvFLAK7FxxkPsvilbipgcH2rL6FIQMoHWA+Sd8dlDgbe4OWZFVXTZbY7Oc8M5cOnojthVZIKYbpVPM396kEQcJoua71l7Lu9aa+KcS4G59T3Y5l5nEC1EG63a8SXunOQg6kiM5su09w==",\n                "qrBase64": "iVBORw0KGgoAAAANSAAn0ifiaAAAABlBMVEX///8AAABVwtN+AAACn0lEQVR42rTTwUrzWBQH8HNpSfygmA/ctCjemU27jRTaBKR1dDvgK2Ro0Y1gsZsOdx5WFrKwbahFd/PISQ6thoHVqdodSgBAJ4oN0a7SrXPvb8K6XZO0OajDhhjxWEEhkVHoVifKP14QAEGaSJzeZfdvZrQCrGKweqfP8aDhYZ4WufReUlVKdS78SgIL5/qYPuy1ei4ZUXoixplg67AsfwArHpw11SpXcbL/Dmzm3+akQAtVzh0l60i/3YKbCyN90N4NQa9YOtlwTCIoPjWQejLh/kgP1YvV/W0d1HSNSmTnxrgHP/dfOrGsiNKVy68LRnh2TL7nHCFL3eWYsArOGh/px31o37U1bobbFa0vjBSw65wAshKm74al9JV+UkJrpREeoVe1rceXoEV8DI9NGb43zSXhOizGBAASUVORK5CYII=",\n                "satStamp": "hMm/Q8r+ghcWGjwQYMQhT7iTwsJ49DCw/mSzzBmLJP4pZmJ66HtB2n7/gL1mYbnNR2uZYKCN8O8EqxFA27PqplSdxeDRWGsbz6HPZ0LPRA98t3SVke85gNFEFssO+42O+uueMPpZOIyUq5B8T/aR9web2xQKSAuFVU5sUkN2wTbOUohnSEZMycJKWDqVLoES5GO5grz1vj29rxnDVpmHgBnQu3fStk73a/gLeBMYAw09D0/4WRTdLtJyFMuM1JE+HVDuuhgj2OZKLfAiAx4qye8zBfv5LwCuf4mgIyP5yss6apVvNeWGkEJUAkHGg==",\n                "stampDate": "2023-05-22T10:14:45",\n                "csdCerNumber": "00001000000509963201",\n                "satCerNumber": "00001000000509846663",\n                "serialNumber": "FG00",\n                "originalChain": "||4.0|FG00|26|2023-05-22T07:14:00|04|00001000000509963201|2353.75|MXN|2542.05|I|01|PUE|22427|02|05|2023|SCT166615AM3|SANTA CLAUS CORP|601|XAXX010101000|Publico General|22427|616|S01|01010101|1684772084|1|ACT|Factura global|2353.75|2353.75|02|2353.75|002|Tasa|0.080000|188.300000|2353.75|002|Tasa|0.080000|188.30|188.30||",\n                "fullSerialNumber": "FG00-26"\n            },\n            "period": 2,\n            "periodicityMonth": "5",\n            "periodicityYear": "2023",\n            "informed": 0,\n            "expirationDate": 1684713600,\n            "emissionDate": 1684713600,\n            "cpnId": 12345\n        }\n    ],\n    "totalAmountDocuments": 2542.05\n}\n')),(0,l.kt)("h2",{id:"get-factura-global-1"},"GET factura global"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"GET ",(0,l.kt)("inlineCode",{parentName:"li"},"/v2/documents/ticket_invoice/global/821/tickets.json")," Obtiene listado de tickets asociados a una factura globale")),(0,l.kt)("h4",{id:"respuesta-3"},"Respuesta"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Response /ticket_invoice/global/821/tickets.json"',title:'"Response','/ticket_invoice/global/821/tickets.json"':!0},'{\n    "href": "https://api.bsale.io/v1/ticket_invoice/global/821/tickets.json",\n    "count": 3,\n    "limit": 25,\n    "offset": 0,\n    "items": [\n        {\n            "documentId": 816,\n            "numDoc": 415,\n            "documentStatus": 0,\n            "commercialStatus": 0,\n            "docGenerationDate": 1696254748,\n            "netAmount": 7954,\n            "exemptAmount": 7954,\n            "taxAmount": 0,\n            "totalAmount": 7954,\n            "documentToken": "67444fd48963",\n            "documentType": 10,\n            "idClient": 0,\n            "idOffice": 1,\n            "urlPublicDocument": "https://gama.bsale.com.mx/view/8888/67664fd48963",\n            "vdtExtra": {\n                "serialNumber": "0000",\n                "fullSerialNumber": "0000-415"\n            },\n            "period": 1,\n            "informed": 2,\n            "expirationDate": 1696204800,\n            "emissionDate": 1696204800,\n            "cpnId": 8888\n        },\n        {\n            "documentId": 817,\n            "numDoc": 416,\n            "documentStatus": 0,\n            "commercialStatus": 0,\n            "docGenerationDate": 1696278241,\n            "netAmount": 100,\n            "exemptAmount": 100,\n            "taxAmount": 0,\n            "totalAmount": 100,\n            "documentToken": "61f215442299",\n            "documentType": 10,\n            "idClient": 0,\n            "idOffice": 1,\n            "urlPublicDocument": "https://gama.bsale.com.mx/view/8888/61f2151d2299",\n            "vdtExtra": {\n                "serialNumber": "0000",\n                "fullSerialNumber": "0000-416"\n            },\n            "period": 1,\n            "informed": 2,\n            "expirationDate": 1696204800,\n            "emissionDate": 1696204800,\n            "cpnId": 8888\n        },\n        {\n            "documentId": 818,\n            "numDoc": 417,\n            "documentStatus": 0,\n            "commercialStatus": 0,\n            "docGenerationDate": 1696278330,\n            "netAmount": 300,\n            "exemptAmount": 300,\n            "taxAmount": 0,\n            "totalAmount": 300,\n            "documentToken": "bd1f23e645",\n            "documentType": 10,\n            "idClient": 0,\n            "idOffice": 1,\n            "urlPublicDocument": "https://gama.bsale.com.mx/view/8888/bd1f23e6cebe",\n            "vdtExtra": {\n                "serialNumber": "0000",\n                "fullSerialNumber": "0000-417"\n            },\n            "period": 1,\n            "informed": 2,\n            "expirationDate": 1696204800,\n            "emissionDate": 1696204800,\n            "cpnId": 8888\n        }\n    ],\n    "totalAmountDocuments": 8354\n}\n')),(0,l.kt)("h2",{id:"post-factura-global"},"POST Factura Global"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"POST ",(0,l.kt)("inlineCode",{parentName:"li"},"/v1/documents.json"))),(0,l.kt)("admonition",{type:"note"},(0,l.kt)("p",{parentName:"admonition"},"La generaci\xf3n de una factura global, consta de dos partes:"),(0,l.kt)("ul",{parentName:"admonition"},(0,l.kt)("li",{parentName:"ul"},"Crear el documento factura global"),(0,l.kt)("li",{parentName:"ul"},"Asociar tickets al documento factura global"))),(0,l.kt)("h3",{id:"crear-factura-global"},"Crear factura global"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "documentTypeId": 8,\n  "officeId": 1,\n  "priceListId": 18,\n  "emissionDate": 1407715200,\n  "declare": 1,\n  "cfdiUse": "CP01",\n}\n')),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"documentTypeId"),", ",(0,l.kt)("a",{parentName:"li",href:"/MX/tipos-de-documentos"},"Id del tipo de documento")," que indicar\xe1 a la factura global. (Integer)."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"officeId"),", ",(0,l.kt)("a",{parentName:"li",href:"/MX/sucursales"},"Id de la sucursal")," donde se emite el documento, si no es especificada el documento quedara asignado a la sucursal por defecto del sistema (Integer)."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"emissionDate"),", Fecha de emisi\xf3n del documento (Integer) (no se debe aplicar zona horaria, solo considerar la fecha)."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"declare"),", Si se desea declarar el documento ante SAT se env\xeda 1, en caso contrario un 0 (Boolean)."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"cfdiUse"),", C\xf3digo uso cfdi del documento a generar (String)."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"cfdiPaymentTypeCode"),", C\xf3digo de forma de pago (String)."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"cfdiOrigin"),", Origen de cfdi, servir\xe1 para identificar el origen. Se visualiza en reportes. (Integer)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"globalCfdiPeriodicity"),", Periodicidad del cfdi (Integer)",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"1, diaria. "),(0,l.kt)("li",{parentName:"ul"},"2, Semanal. "),(0,l.kt)("li",{parentName:"ul"},"3, Quincenal. "),(0,l.kt)("li",{parentName:"ul"},"4, Mensual"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"globalCfdiMonth"),", Mes del cfdi global (Integer)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"globalCfdiYear"),",  A\xf1o del cfdi global (Integer)")),(0,l.kt)("h3",{id:"cliente-del-documento"},"Cliente del documento"),(0,l.kt)("admonition",{type:"note"},(0,l.kt)("p",{parentName:"admonition"},"Para la emisi\xf3n de una factura global el cliente es ",(0,l.kt)("inlineCode",{parentName:"p"},"PUBLICO GENERAL"),", Bsale tiene reservado el ",(0,l.kt)("strong",{parentName:"p"},"clientId=1")," para este efecto.")),(0,l.kt)("h4",{id:"cliente"},"Cliente"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n   "clientId": 1\n}\n')),(0,l.kt)("h3",{id:"detalles"},"Detalles"),(0,l.kt)("admonition",{type:"caution"},(0,l.kt)("p",{parentName:"admonition"},(0,l.kt)("inlineCode",{parentName:"p"},"netUnitValue"),": ",(0,l.kt)("strong",{parentName:"p"},"no debe registrarse valores negativos"),", si se env\xeda ser\xe1 rechazado por la entidad tributaria (SAT), debe indicarse el valor sin impuestos seg\xfan el monto obtenido de la cantidad de tickets a facturarse.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "details": [\n        {\n            "netUnitValue": 100,\n            "quantity": 1,\n            "comment": "Factura global",\n            "taxId": "[1]"\n        },\n        {\n            "netUnitValue": 200,\n            "quantity": 1,\n            "comment": "Factura global",\n            "taxId": "[2]"\n        }\n    ]\n}\n')),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"netUnitValue"),", Valor unitario neto de la variante, este valor es sin impuestos (Float)."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"quantity"),", Cantidad de la variante que se esta vendiendo (Integer)."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"taxId"),', Arreglo de identificadores de los impuestos a utilizar, estos tienen que ir dentro de "[]"  (String).'),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"comment"),", Descripci\xf3n breve de la variante  (String).")),(0,l.kt)("h3",{id:"forma-de-pago"},"Forma de pago"),(0,l.kt)("p",null,"Se pueden especificar los pagos asociados al documento, se requiere un nodo similar a:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "cfdiPaymentTypeCode": "03",\n}\n')),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"cfdiPaymentTypeCode"),", C\xf3digo de la forma de pago SAT")),(0,l.kt)("admonition",{type:"info"},(0,l.kt)("p",{parentName:"admonition"},"La factura global s\xf3lo defina una forma de pago asociada al documento")),(0,l.kt)("h3",{id:"ejemplo-json"},"Ejemplo JSON"),(0,l.kt)("h4",{id:"env\xedo"},"Env\xedo"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="POST /documents.json "',title:'"POST',"/documents.json":!0,'"':!0},'{\n    "documentTypeId": 39,\n    "officeId": 1,\n    "emissionDate": 1685318400,\n    "cfdiUse": "CP01",\n    "cfdiPaymentTypeCode": "03",\n    "cfdiOrigin": "1",\n    "globalCfdiPeriodicity": 1,\n    "globalCfdiMonth": 5,\n    "globalCfdiYear": 2023,\n    "clientId": "1",\n    "details": [\n        {\n            "netUnitValue": 100,\n            "quantity": 1,\n            "comment": "Factura global",\n            "taxId": "[1]"\n        },\n        {\n            "netUnitValue": 200,\n            "quantity": 1,\n            "comment": "Factura global",\n            "taxId": "[2]"\n        }\n    ]\n}\n')),(0,l.kt)("h4",{id:"respuesta-4"},"Respuesta"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="201 Response /documents.json "',title:'"201',Response:!0,"/documents.json":!0,'"':!0},'{\n    "href": "https://api.bsale.io/v1/documents/137.json",\n    "id": 137,\n    "emissionDate": 1685318400,\n    "expirationDate": 1685318400,\n    "generationDate": 1685388817,\n    "number": 3,\n    "serialNumber": "FG00-3",\n    "trackingNumber": null,\n    "totalAmount": 369.0,\n    "netAmount": 300.0,\n    "taxAmount": 69.0,\n    "exemptAmount": 0.0,\n    "exportTotalAmount": 0.0,\n    "exportNetAmount": 0.0,\n    "exportTaxAmount": 0.0,\n    "exportExemptAmount": 0.0,\n    "commissionRate": 0.0,\n    "commissionNetAmount": 0.0,\n    "commissionTaxAmount": 0.0,\n    "commissionTotalAmount": 0.0,\n    "percentageTaxWithheld": 0.0,\n    "purchaseTaxAmount": 0.0,\n    "purchaseTotalAmount": 0.0,\n    "address": "VARSOVIA 36",\n    "district": "JUAREZ",\n    "city": "Ciudad de M\xe9xico",\n    "stamp": null,\n    "urlPublicView": "https://app2.bsale.com.mx/view/12345/4efc6219cf6c?sfd=99",\n    "urlPdf": "https://app2.bsale.com.mx/view/12345/4efc6219cf6c.pdf?sfd=99",\n    "urlPublicViewOriginal": "https://app2.bsale.com.mx/view/12345/4efc6219cf6c",\n    "urlPdfOriginal": "https://app2.bsale.com.mx/view/12345/4efc6219cf6c.pdf",\n    "token": "4efc6219cf6c",\n    "state": 0,\n    "commercialState": 0,\n    "urlXml": null,\n    "salesId": null,\n    "informed": 2,\n    "responseMsg": null,\n    "document_type": {\n        "href": "https://api.bsale.io/v1/document_types/39.json",\n        "id": "39"\n    },\n    "client": {\n        "href": "https://api.bsale.io/v1/clients/1.json",\n        "id": "1"\n    },\n    "office": {\n        "href": "https://api.bsale.io/v1/offices/1.json",\n        "id": "1"\n    },\n    "user": {\n        "href": "https://api.bsale.io/v1/users/3.json",\n        "id": "3"\n    },\n    "coin": {\n        "href": "https://api.bsale.io/v1/coins/1.json",\n        "id": "1"\n    },\n    "references": {\n        "href": "https://api.bsale.io/v1/documents/137/references.json"\n    },\n    "document_taxes": {\n        "href": "https://api.bsale.io/v1/documents/137/document_taxes.json"\n    },\n    "details": {\n        "href": "https://api.bsale.io/v1/documents/137/details.json"\n    },\n    "sellers": {\n        "href": "https://api.bsale.io/v1/documents/137/sellers.json"\n    },\n    "attributes": {\n        "href": "https://api.bsale.io/v1/documents/137/attributes.json"\n    }\n}\n')),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"Una vez ",(0,l.kt)("strong",{parentName:"p"},"creada la Factura Global"),", la API responder\xe1 el ",(0,l.kt)("inlineCode",{parentName:"p"},"id")," de esta, te servir\xe1 para asociar los tickets. Lo debes referenciar como ",(0,l.kt)("inlineCode",{parentName:"p"},"idDocInvoice"),".")),(0,l.kt)("h3",{id:"asociar-tickets-a-factura-global"},"Asociar tickets a factura global"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"POST ",(0,l.kt)("inlineCode",{parentName:"li"},"/v2/documents/ticket_invoice/global.json")," Asociar tickets a una factura global")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "idDocInvoice": 137, \n    "tickets": [\n        {\n            "idDocTicket": 612,\n            "numTicket": 245\n        }\n    ],\n    "period": 1 \n}\n')),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"idDocInvoice"),", Id de la factura que se asociar\xe1 con los tickets"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"tickets"),", Arreglo de Id's y numeros de tickets (Array)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"period"),", Periodicidad del cfdi (Integer)",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"1, diaria. "),(0,l.kt)("li",{parentName:"ul"},"2, Semanal. "),(0,l.kt)("li",{parentName:"ul"},"3, Quincenal. "),(0,l.kt)("li",{parentName:"ul"},"4, Mensual")))),(0,l.kt)("h4",{id:"respuesta-5"},"Respuesta"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "code": 201,\n    "data": {\n        "message": "Tickets guardados correctamente",\n        "idDocTicketsSuccess": [\n            612\n        ],\n        "idDocTicketsFailed": []\n    }\n}\n')),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"message"),", Detalle de la operacion (String)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"idDocTicketsSuccess"),", Arreglo de Id's de los tickets ",(0,l.kt)("strong",{parentName:"li"},"asociados")," a la factura exitosamente (Array)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"idDocTicketsFailed"),", Arreglo de Id's de los tickets que ",(0,l.kt)("strong",{parentName:"li"},"no")," se asociaron a la factura (Array)")))}s.isMDXComponent=!0}}]);